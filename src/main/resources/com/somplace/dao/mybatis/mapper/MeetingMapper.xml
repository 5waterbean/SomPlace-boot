<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.somplace.dao.mybatis.mapper.MeetingMapper">
	<cache/>
	<sql id="selectMeeting_fragment">
		SELECT MEETINGID, MEETINGTITLE, NUMOFPEOPLE, MAXPEOPLE, MEETINGPLACE, 
			MEMO, MEETINGINFO, MEETINGINFODETAIL, CLOSE, CANCEL, CREATORID
		FROM MEETING
	</sql>
	
	<!-- 모임 조회 -->
	<select resultType="Meeting" id="getMeetingList"> 
		<include refid="selectMeeting_fragment" />
	</select>
	
	<!-- 모임 아이디 조회 -->
	<select resultType="_int" id="getMeetingId" parameterType="com.somplace.domain.command.MeetingCommand">
		SELECT meetingId
		FROM meeting
		WHERE meetingTitle=#{meetingTitle} AND maxPeople=#{maxPeople} AND 
			meetingPlace=#{meetingPlace} AND memo=#{memo} AND meetingInfo=#{meetingInfo} AND
    		meetingInfoDetail=#{meetingInfoDetail} AND creatorId=#{creatorId}
	</select>
	
	<!-- 모임 생성 -->
	<insert id="createMeeting" parameterType="com.somplace.domain.command.MeetingCommand"> 
		INSERT INTO meeting VALUES 
		(meetingid_seq.nextval, #{meetingTitle}, 1, #{maxPeople}, #{meetingPlace}, #{memo}, #{meetingInfo}, #{meetingInfoDetail}, #{creatorId}, 0, 0)
	</insert>
	
	<!-- 내가 생성한 모임 목록 조회 -->
	<select resultType="Meeting" id="getMadeMeetingList"> 
		<include refid="selectMeeting_fragment" />
		WHERE CREATORID = #{creatorId}
	</select>	

</mapper>